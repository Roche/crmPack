<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="crmPack">
<title>Trial Definition • crmPack</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Trial Definition">
<meta property="og:description" content="crmPack">
<meta property="og:image" content="https://roche.github.io/crmPack/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">crmPack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.9000.9133</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/trial_definition.html">Trial Definition</a>
    <a class="dropdown-item" href="../articles/trial_analysis.html">Trial Analysis</a>
    <a class="dropdown-item" href="../articles/trial_sanity_checks.html">Trial Design: basic sanity checks</a>
    <a class="dropdown-item" href="../articles/trial_simulation.html">Trial Simulation</a>
    <a class="dropdown-item" href="../articles/rolling-crm.html">Rolling CRM Example</a>
    <a class="dropdown-item" href="../articles/simulations.html">Simulation study example</a>
    <a class="dropdown-item" href="../articles/migration_from_the_old_crmPack.html">Migrating from crmPack version 1.0.3</a>
    <a class="dropdown-item" href="../articles/parallel_computing_with_extensions.html">Parallel computing with extensions</a>
    <a class="dropdown-item" href="../articles/crmPack-jss-paper.html">Model-based Dose Escalation Designs in R with crmPack (JSS manuscript)</a>
    <a class="dropdown-item" href="../articles/example.html">crmPack: Object-oriented implementation of CRM designs</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://Roche.github.io/crmPack/main">main</a> </div></li>
<!-- end dropdown for versions -->
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reports">Reports</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reports">
    <a class="dropdown-item" href="../coverage-report/">Coverage report</a>
    <a class="dropdown-item" href="../unit-test-report/">Unit test report</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/roche/crmPack">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Trial Definition</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/roche/crmPack/blob/HEAD/vignettes/trial_definition.Rmd" class="external-link"><code>vignettes/trial_definition.Rmd</code></a></small>
      <div class="d-none name"><code>trial_definition.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="defining-the-design">Defining the design<a class="anchor" aria-label="anchor" href="#defining-the-design"></a>
</h2>
<p>A CRM study consists of six basic elements:</p>
<ul>
<li>The dose grid</li>
<li>The dose-toxicity model</li>
<li>The increment rule_<sup>1</sup>
</li>
<li>The dose recommendation rule<sup>1</sup>
</li>
<li>The cohort size<sup>1</sup>
</li>
<li>The stopping rule</li>
</ul>
<p>1: Note that in <code>crmPack</code>, the increment, dose selection
and cohort size rules are collectively known as the <i>escalation
rules</i>.</p>
<p>There are many, many possible choices for each element. In this
introduction, we make simple choices for the value of each element.</p>
<p>We start by loading the <code>crmPack</code> package …</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/roche/crmPack" class="external-link">crmPack</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'crmPack':</span></span>
<span><span class="co">#&gt;   method       from  </span></span>
<span><span class="co">#&gt;   print.gtable gtable</span></span>
<span><span class="co">#&gt; Type crmPackHelp() to open help browser</span></span>
<span><span class="co">#&gt; Type crmPackExample() to open example</span></span></code></pre></div>
<p>… and defining each element in turn.</p>
<div class="section level3">
<h3 id="the-dose-grid">The dose grid<a class="anchor" aria-label="anchor" href="#the-dose-grid"></a>
</h3>
<p>First, we list the doses that <em>might</em> be used during the
trial.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the dose grid.</span></span>
<span><span class="va">empty_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Data-class.html">Data</a></span><span class="op">(</span>doseGrid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">9</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">45</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>There is no commitment to use every dose in the grid. Here we define
a grid of 9 doses ranging between 1 and 100. <code>crmPack</code> is
agnostic with respect to the units used to measure the doses. The only
requirements are that the dose grid is ordered and one dimensional.</p>
<p>Additional doses can be added whilst the trial is running. This will
not affect the validity of the results of the trial prior to the
addition, but will probably affect the trial’s operating
characteristics.</p>
</div>
<div class="section level3">
<h3 id="the-dose-toxicity-model">The dose toxicity model<a class="anchor" aria-label="anchor" href="#the-dose-toxicity-model"></a>
</h3>
<p>Next, define the dose toxicity model.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize the CRM model.</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/LogisticLogNormal-class.html">LogisticLogNormal</a></span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.85</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  cov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  ref_dose <span class="op">=</span> <span class="fl">56</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In <code>crmPack</code>, the <code>LogisticLogNormal</code> class
fits a model of the following form:</p>
<p><span class="math display">\[log(\frac{p_i}{1 - p_i}) = \alpha +
\beta log(d_i / d^*)\]</span></p>
<p>where <span class="math inline">\(d^*\)</span> is a reference dose
(specified by the <code>ref_dose</code> argument to the
<code>LogisticLogNormal</code> function above) and the prior joint
distribution of <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> is</p>
<p><span class="math display">\[\begin{bmatrix}
\alpha \\
log(\beta)
\end{bmatrix}   \sim
N\begin{pmatrix}
\begin{bmatrix}
\mu_{\alpha}\\ \mu_{\beta}
\end{bmatrix}   ,
\begin{bmatrix}
\sigma_{\alpha\alpha} &amp; \sigma_{\alpha\beta} \\
\sigma_{{\beta\alpha}} &amp; \sigma_{\beta\beta}
\end{bmatrix}   
\end{pmatrix}.
\]</span></p>
<p>The mean and covariance matrices are defined by the <code>mean</code>
and <code>cov</code> parameters to the <code>LogisticLogNormal</code>
call. So the code above defines the prior joint distribution of <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(log(\beta)\)</span> to be</p>
<p><span class="math display">\[
N\begin{pmatrix}
\begin{bmatrix}
-0.85\\0
\end{bmatrix}   ,
\begin{bmatrix}
1 &amp; -0.5 \\
-0.5 &amp; 1
\end{bmatrix}   
\end{pmatrix}.
\]</span></p>
<p>It is easy to obtain a visual representation of the prior:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vignetteMcmcOptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/McmcOptions-class.html">McmcOptions</a></span><span class="op">(</span>burnin <span class="op">=</span> <span class="fl">100</span>, step <span class="op">=</span> <span class="fl">2</span>, samples <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="va">prior_samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcmc.html">mcmc</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">empty_data</span>,</span>
<span>  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>  options <span class="op">=</span> <span class="va">vignetteMcmcOptions</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prior_samples</span>, <span class="va">model</span>, <span class="va">empty_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="trial_definition_files/figure-html/unnamed-chunk-5-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="the-escalation-rules">The escalation rules<a class="anchor" aria-label="anchor" href="#the-escalation-rules"></a>
</h3>
<div class="section level4">
<h4 id="the-maximum-increment">The maximum increment<a class="anchor" aria-label="anchor" href="#the-maximum-increment"></a>
</h4>
<p>Now, we define the maximum possible increment between the dose used
in current cohort and the dose used in the next, regardless of likely
toxicity.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Choose the rule for dose increments.</span></span>
<span><span class="va">my_increments</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IncrementsRelative-class.html">IncrementsRelative</a></span><span class="op">(</span></span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  increments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The rule we have chosen here defines the maximum possible increment
in terms of multiples of the highest dose so far administered: for doses
greater than <code>0</code> and less than <code>20</code>, the maximum
increment is 100 x (1 + 1)%, or 200% of the highest dose used so far.
For doses of <code>20</code> or more, the maximum increment is 100 x (1
+ 0.5)%, or 150% of the highest dose used so far.</p>
<p>Note that a 2-fold <em>increment</em> corresponds to a 3-fold
<em>escalation</em>.</p>
<p>In tabular form, based on the dose grid defined above, the maximum
permitted escalation is</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="right">Highest dose<br>administered so far</th>
<th align="right">Maximum permitted increment</th>
<th align="right">Maximum permitted dose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">2.0</td>
<td align="right">3.0</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">6.0</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">18.0</td>
<td align="right">27.0</td>
</tr>
<tr class="even">
<td align="right">20</td>
<td align="right">40.0</td>
<td align="right">60.0</td>
</tr>
<tr class="odd">
<td align="right">30</td>
<td align="right">45.0</td>
<td align="right">75.0</td>
</tr>
<tr class="even">
<td align="right">45</td>
<td align="right">67.5</td>
<td align="right">112.5</td>
</tr>
<tr class="odd">
<td align="right">60</td>
<td align="right">90.0</td>
<td align="right">150.0</td>
</tr>
<tr class="even">
<td align="right">80</td>
<td align="right">120.0</td>
<td align="right">200.0</td>
</tr>
<tr class="odd">
<td align="right">100</td>
<td align="right">200.0</td>
<td align="right">Not applicable</td>
</tr>
</tbody>
</table>
<p>So, if the highest dose used so far is <code>9</code>, the highest
dose in the dose grid that can be used in the next cohort is
<code>20</code>, even if <code>30</code> or higher doses are deemed safe
by the <code>NextBest</code> rule.</p>
<p>Next, we define the rule for choosing the <em>best</em> dose for the
<em>next</em> cohort</p>
</div>
<div class="section level4">
<h4 id="the-nextbest-rule-for-recommending-the-best-dose-for-the-next-cohort">The NextBest rule for recommending the best dose for the next
cohort<a class="anchor" aria-label="anchor" href="#the-nextbest-rule-for-recommending-the-best-dose-for-the-next-cohort"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Choose the rule for selecting the next dose.</span></span>
<span><span class="va">my_next_best</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/NextBestNCRM-class.html">NextBestNCRM</a></span><span class="op">(</span></span>
<span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.35</span><span class="op">)</span>,</span>
<span>  overdose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  max_overdose_prob <span class="op">=</span> <span class="fl">0.25</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here, we choose to use Neuenschwander’s rule <span class="citation">(Neuenschwander, Branson, and Gsponer 2008)</span>, in
which the dose for the next cohort to be the dose (amongst those doses
that are eligible for selection according to the escalation rule) that
has the highest posterior chance of having a probability of toxicity in
the target range - here [0.2, 0.35) - provided that the dose’s chance of
having a probability of toxicity in the overdose range - here [0.35,
1.0] - is less than 0.25.</p>
</div>
<div class="section level4">
<h4 id="the-cohort-size">The cohort size<a class="anchor" aria-label="anchor" href="#the-cohort-size"></a>
</h4>
<p>Now, we define the rule for choosing the size of the next cohort.</p>
<blockquote>
<p>Note, the term “cohort size” is somewhat anachronistic. It is a
hangover from the days of the 3+3 design. In the context of CRM trials,
it is best interpreted as “the largest permitted interval between CRM
model updates”. In a CRM trial, the model can be updated <em>at any
time</em> and there is no mathematical need to halt recruitment to allow
the model to be updated.</p>
</blockquote>
<p>We elect to define the cohort size using a compound rule. Both the
dose to be used and the number of DLTs so far observed contribute to the
decision. The first part of the compound rule (<code>my_size_1</code>),
based on the dose to be used, permits the use a single patient run-in up
to and including a dose of <code>20</code>. For doses above
<code>20</code>, the minimum cohort size is <code>3</code>. The second
part of the compound rule (<code>my_size_2</code>) also permits a single
patient run-in, so long as no DLTs have so far been observed. As soon as
the first DLT is reported, the minimum cohort size is <code>3</code>. To
determine the <em>actual</em> size of the next cohort, the larger number
required by the two parts of the compound rule is used.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Choose the rule for the cohort size.</span></span>
<span><span class="va">my_size_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CohortSizeRange-class.html">CohortSizeRange</a></span><span class="op">(</span></span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  cohort_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_size_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CohortSizeDLT-class.html">CohortSizeDLT</a></span><span class="op">(</span></span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  cohort_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_size</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/maxSize.html">maxSize</a></span><span class="op">(</span><span class="va">my_size_1</span>, <span class="va">my_size_2</span><span class="op">)</span></span></code></pre></div>
<p>In other words, provided the dose is <code>20</code> or below and no
DLTs have been observed, a single patient cohort is permitted. In all
other cases, the required cohort size is <code>3</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="the-stopping-rules">The stopping rules<a class="anchor" aria-label="anchor" href="#the-stopping-rules"></a>
</h3>
<p>Now we create the rules that define when the trial’s objectives have
been met (or when it should be stopped for futility).<br>
The futility rule is the easiest to explain: if twenty patients have
been recruited, the study should stop (<code>my_stopping_3</code>). The
success rule requires both of the following conditions to have been
met:</p>
<ul>
<li>At least three cohorts must have been treated</li>
<li>The probability that the current estimate of the MTD is in the
target toxicity range must be at least 0.5.</li>
</ul>
<p>The trial will stop of either the futility rule or <em>both</em>
components of the success rule are satisfied.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Choose the rule for stopping.</span></span>
<span><span class="va">my_stopping_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StoppingMinCohorts-class.html">StoppingMinCohorts</a></span><span class="op">(</span>nCohorts <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">my_stopping_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StoppingTargetProb-class.html">StoppingTargetProb</a></span><span class="op">(</span></span>
<span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.35</span><span class="op">)</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_stopping_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StoppingMinPatients-class.html">StoppingMinPatients</a></span><span class="op">(</span>nPatients <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">my_stopping</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">my_stopping_1</span> <span class="op">&amp;</span> <span class="va">my_stopping_2</span><span class="op">)</span> <span class="op">|</span> <span class="va">my_stopping_3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-overall-trial-design">The overall trial design<a class="anchor" aria-label="anchor" href="#the-overall-trial-design"></a>
</h3>
<p>Finally, we combine all six elements of the design, together with the
starting dose, to define the trial.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize the design.</span></span>
<span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Design-class.html">Design</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>  nextBest <span class="op">=</span> <span class="va">my_next_best</span>,</span>
<span>  stopping <span class="op">=</span> <span class="va">my_stopping</span>,</span>
<span>  increments <span class="op">=</span> <span class="va">my_increments</span>,</span>
<span>  cohort_size <span class="op">=</span> <span class="va">my_size</span>,</span>
<span>  data <span class="op">=</span> <span class="va">empty_data</span>,</span>
<span>  startingDose <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We are now ready to use our trial definition, either to analyse a
real trial or to simulate the long term operating characteristics of the
design. These processes are described in their own vignettes <a href="trial_analysis.html">here</a> and <a href="trial_simulation.html">here</a>.</p>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Neuenschwander2008" class="csl-entry">
Neuenschwander, Beat, Michael Branson, and Thomas Gsponer. 2008.
<span>“Critical Aspects of the Bayesian Approach to Phase i Cancer
Trials.”</span> <em><span>Statistics in Medicine</span></em> 27 (13):
2420–39.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Daniel Sabanes Bove, Wai Yin Yeung, Burak Kuersad Guenhan, Giuseppe Palermo, Thomas Jaki, Jiawen Zhu, Ziwei Liao, Dimitris Kontos, Marlene Schulte-Goebel, Doug Kelkhoff, Oliver Boix, Robert Adams, Clara Beck, John Kirkpatrick, F. Hoffmann-La Roche AG, Merck Healthcare KGaA, Bayer AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
